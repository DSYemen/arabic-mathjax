# إضافة اللغة العربية لـ MathJax (الإصدار 4)

هذه الإضافة توفر دعمًا أساسيًا للغة العربية في [MathJax v4](https://www.mathjax.org/)، مما يتيح عرض المعادلات الرياضية المكتوبة باللغة العربية بشكل صحيح من اليمين إلى اليسار (RTL) مع ترجمة الرموز والدوال الشائعة.

## الميزات الرئيسية

- **عرض RTL**: قلب اتجاه المعادلة لعرضها بشكل صحيح من اليمين إلى اليسار.
- **ترجمة تلقائية**: ترجمة الأرقام، المتغيرات، والدوال الرياضية من الإنجليزية إلى العربية والعكس.
- **اكتشاف اللغة**: أمر `\auto` الذكي الذي يكتشف لغة المعادلة ويقوم بترجمتها للغة الأخرى.
- **أوامر مخصصة**: توفير أوامر TeX للتحكم الدقيق في الترجمة (`\ar`, `\en`, `\trans`, `\transn`).
- **دوال ومصطلحات مترجمة**: دعم ترجمة المصطلحات شائعة الاستخدام مثل `\radius` (نق) و `\Area` (م).

## طريقة الاستخدام

### التهيئة والإعداد

لتفعيل الإضافة، يجب أولاً إعداد MathJax v4 في صفحتك ثم إضافة مسار الإضافة وحزمة `arabic-extension` إلى الإعدادات. هذا الإعداد سيفعل الإضافة لكل من مدخلات TeX و MathML و AsciiMath.

```javascript
window.MathJax = {
  loader: {
    // استبدل المسار التالي بالمسار الصحيح لملف arabic.js على خادمك
    load: ['[custom]/arabic.js', 'input/tex', 'input/mathml', 'input/asciimath', 'output/chtml', 'ui/menu'],
    paths: {custom: 'https://your-path-to/dist'}
  },
  tex: {
    // تفعيل الحزمة لمدخلات TeX
    packages: {'[+]': ['arabic-extension']}
  },
  options: {
    arabic: {
      autoLTR: true // تفعيل الاكتشاف التلقائي لاتجاه الصفحة
    }
  }
};
```

تأكد من استبدال `https://your-path-to/dist` بالمسار الفعلي الذي يوجد به ملف `dist/arabic.js`. سيقوم الـ `post-filter` بتطبيق الترجمة العربية والعرض من اليمين لليسار تلقائيًا على جميع تنسيقات الإدخال المدعومة.

### كتابة المعادلات العربية

توفر الإضافة مجموعة من أوامر TeX الجديدة لتسهيل كتابة المعادلات باللغة العربية:

1.  **`\auto{EQUATION}` (مستحسن)**

    يقوم هذا الأمر باكتشاف لغة المعادلة تلقائيًا وترجمتها إلى اللغة المقابلة. إذا كانت المعادلة باللغة العربية، سيتم ترجمتها إلى الإنجليزية، والعكس صحيح.

    **مثال:** `\auto{x^2 + 2x + 1 = 0}` ستُعرض كـ `س^٢ + ٢س + ١ = ٠`.

2.  **`\ar{EQUATION}`**

    لفرض الترجمة إلى اللغة العربية وقلب اتجاه المعادلة.

    **مثال:** `\ar{f(x) = \sin(x)}` ستُعرض كـ `ق(س) = جا(س)`.

3.  **`\en{EQUATION}`**

    لفرض الترجمة إلى اللغة الإنجليزية (مفيد عند التعامل مع معادلات مكتوبة بالعربية).

    **مثال:** `\en{ق(س) = جا(س)}` ستُعرض كـ `f(x) = sin(x)`.

4.  **`\trans{TEXT}`**

    لترجمة نص معين إلى العربية.

5.  **`\transn{NUMBER}`**

    لترجمة الأرقام (بما في ذلك الكسور العشرية) إلى العربية.

### الأوامر المترجمة

توفر الإضافة أيضًا أوامر يتم ترجمتها تلقائيًا بناءً على لغة الصفحة (`<html lang="ar">`):

- `\zero`: يطبع `0` في الإنجليزية و `صفر` في العربية.
- `\radius`: يطبع `r` في الإنجليزية و `نق` في العربية.
- `\Area`: يطبع `A` في الإنجليزية و `م` في العربية.
- `\charge`: يطبع `C` في الإنجليزية و `ڛ` في العربية.

## الميزات المدعومة

- **قلب اتجاه العرض**: يتم قلب اتجاه الأقواس `()`, `{}`, `[]` وعمليات التكامل `∫`, الجذور `√`, والمجموع `Σ`.
- **الرموز الثابتة**: لا يتم قلب الحروف والرموز التي لا يتغير شكلها مثل `Θ`, `π`, `ε`.
- **ترجمة الدوال**:
  - `\sin` -> `جا`
  - `\cos` -> `جتا`
  - `\tan` -> `ظا`
  - `\cot` -> `ظتا`
  - `\sec` -> `قا`
  - `\csc` -> `قتا`
  - `\log` -> `لو`
- **ترجمة النهايات**: `\lim` -> `نهــا`.
- **الأرقام العربية**: يتم تحويل الأرقام `0-9` إلى `٠-٩`.

## أفضل الممارسات

- **استخدم `\auto`**: للحصول على أفضل النتائج بأقل مجهود، استخدم الأمر `\auto` لمعظم المعادلات.
- **حدد لغة الصفحة**: تأكد من ضبط `lang="ar"` في وسم `<html>` لصفحاتك العربية للاستفادة من الترجمة المشروطة للأوامر مثل `\radius`.
- **المعادلات المختلطة**: في حال وجود معادلات تحتوي على نصوص عربية وإنجليزية معًا، قد تحتاج إلى استخدام `\text{...}` للحفاظ على النصوص الإنجليزية كما هي داخل معادلة عربية.

## المساهمة

نرحب دائمًا بالمساهمات لتحسين هذه الإضافة. يمكنك فتح "Issue" للإبلاغ عن الأخطاء أو "Pull Request" لاقتراح تحسينات.

## الترخيص

هذا المشروع مرخص تحت [ترخيص Apache 2.0](LICENSE).
